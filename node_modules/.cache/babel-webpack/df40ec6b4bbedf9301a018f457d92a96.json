{"ast":null,"code":"\"use strict\";\n\nvar DOMImplementation = require('./DOMImplementation');\n\nvar EventTarget = require('./EventTarget');\n\nvar Location = require('./Location');\n\nvar sloppy = require('./sloppy');\n\nvar utils = require('./utils');\n\nmodule.exports = Window;\n\nfunction Window(document) {\n  this.document = document || new DOMImplementation(null).createHTMLDocument(\"\");\n  this.document._scripting_enabled = true;\n  this.document.defaultView = this;\n  this.location = new Location(this, this.document._address || 'about:blank');\n}\n\nWindow.prototype = Object.create(EventTarget.prototype, {\n  _run: {\n    value: sloppy.Window_run\n  },\n  console: {\n    value: console\n  },\n  history: {\n    value: {\n      back: utils.nyi,\n      forward: utils.nyi,\n      go: utils.nyi\n    }\n  },\n  navigator: {\n    value: require(\"./NavigatorID\")\n  },\n  // Self-referential properties\n  window: {\n    get: function get() {\n      return this;\n    }\n  },\n  self: {\n    get: function get() {\n      return this;\n    }\n  },\n  frames: {\n    get: function get() {\n      return this;\n    }\n  },\n  // Self-referential properties for a top-level window\n  parent: {\n    get: function get() {\n      return this;\n    }\n  },\n  top: {\n    get: function get() {\n      return this;\n    }\n  },\n  // We don't support any other windows for now\n  length: {\n    value: 0\n  },\n  // no frames\n  frameElement: {\n    value: null\n  },\n  // not part of a frame\n  opener: {\n    value: null\n  },\n  // not opened by another window\n  // The onload event handler.\n  // XXX: need to support a bunch of other event types, too,\n  // and have them interoperate with document.body.\n  onload: {\n    get: function get() {\n      return this._getEventHandler(\"load\");\n    },\n    set: function set(v) {\n      this._setEventHandler(\"load\", v);\n    }\n  },\n  // XXX This is a completely broken implementation\n  getComputedStyle: {\n    value: function getComputedStyle(elt) {\n      return elt.style;\n    }\n  }\n});\nutils.expose(require('./WindowTimers'), Window);\nutils.expose(require('./impl'), Window);","map":null,"metadata":{},"sourceType":"script"}