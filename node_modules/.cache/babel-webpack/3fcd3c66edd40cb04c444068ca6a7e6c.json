{"ast":null,"code":"\"use strict\";\n\nvar __extends = this && this.__extends || function (d, b) {\n  for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n\n  function __() {\n    this.constructor = d;\n  }\n\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\n\nvar Observable_1 = require('../Observable');\n\nvar subscribeToResult_1 = require('../util/subscribeToResult');\n\nvar OuterSubscriber_1 = require('../OuterSubscriber');\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @extends {Ignored}\n * @hide true\n */\n\n\nvar UsingObservable = function (_super) {\n  __extends(UsingObservable, _super);\n\n  function UsingObservable(resourceFactory, observableFactory) {\n    _super.call(this);\n\n    this.resourceFactory = resourceFactory;\n    this.observableFactory = observableFactory;\n  }\n\n  UsingObservable.create = function (resourceFactory, observableFactory) {\n    return new UsingObservable(resourceFactory, observableFactory);\n  };\n  /** @deprecated internal use only */\n\n\n  UsingObservable.prototype._subscribe = function (subscriber) {\n    var _a = this,\n        resourceFactory = _a.resourceFactory,\n        observableFactory = _a.observableFactory;\n\n    var resource;\n\n    try {\n      resource = resourceFactory();\n      return new UsingSubscriber(subscriber, resource, observableFactory);\n    } catch (err) {\n      subscriber.error(err);\n    }\n  };\n\n  return UsingObservable;\n}(Observable_1.Observable);\n\nexports.UsingObservable = UsingObservable;\n\nvar UsingSubscriber = function (_super) {\n  __extends(UsingSubscriber, _super);\n\n  function UsingSubscriber(destination, resource, observableFactory) {\n    _super.call(this, destination);\n\n    this.resource = resource;\n    this.observableFactory = observableFactory;\n    destination.add(resource);\n    this.tryUse();\n  }\n\n  UsingSubscriber.prototype.tryUse = function () {\n    try {\n      var source = this.observableFactory.call(this, this.resource);\n\n      if (source) {\n        this.add(subscribeToResult_1.subscribeToResult(this, source));\n      }\n    } catch (err) {\n      this._error(err);\n    }\n  };\n\n  return UsingSubscriber;\n}(OuterSubscriber_1.OuterSubscriber); //# sourceMappingURL=UsingObservable.js.map","map":null,"metadata":{},"sourceType":"script"}